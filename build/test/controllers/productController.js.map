{"version":3,"sources":["../../../server/test/controllers/productController.js"],"names":["chai","use","chaiHttp","expect","getAll","get","describe","context","it","done","request","app","end","err","res","to","be","null","have","status","an","body","message","equal","post","send","name","category","price","set","newProduct","property"],"mappings":"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","file":"productController.js","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport get from '../../controllers/productController';\r\nimport app from '../../../app';\r\n\r\nchai.use(chaiHttp);\r\n\r\nconst expect = chai.expect;\r\nconst getAll = get.getAll;\r\n\r\ndescribe('products', () => {\r\n  context('#get requests for products', () => {\r\n    it('Should return products', (done) => {\r\n      chai.request(app)\r\n\t\t\t  .get('/api/v1/products')\r\n\t\t\t  .end((err, res) => {\r\n\t\t\t\t  expect(err).to.be.null;\r\n\t\t\t\t  expect(res).to.have.status(200);\r\n\t\t\t\t  expect(res).to.be.an('object');\r\n\t\t\t\t  done();\r\n\t\t\t  });\r\n    });\r\n\r\n    it('Should return an existing product', (done) => {\r\n      chai.request(app)\r\n\t\t\t  .get('/api/v1/products/1')\r\n\t\t\t  .end((err, res) => {\r\n\t\t\t\t  expect(err).to.be.null;\r\n\t\t\t\t  expect(res).to.have.status(200);\r\n\t\t\t\t  expect(res).to.be.an('object');\r\n\t\t\t\t  done();\r\n\t\t\t  });\r\n    });\r\n\r\n    it('Should not return product for non-existent id', (done) => {\r\n      chai.request(app)\r\n\t\t\t  .get('/api/v1/products/20')\r\n\t\t\t  .end((err, res) => {\r\n\t\t\t\t  expect(res).to.have.status(404);\r\n\t\t\t\t  expect(res.body.message).to.equal('Sorry, product does not exist');\r\n\t\t\t\t  done();\r\n\t\t\t  });\r\n    });\r\n  });\r\n\r\n  context('#post requests for products', () => {\r\n    it('Should not post products to the store for non-admins', (done) => {\r\n      chai.request(app)\r\n\t\t\t  .post('/api/v1/products')\r\n\t\t\t  .send({\r\n          name: 'junk',\r\n          category: 'provisions',\r\n          'qty-left': 20,\r\n\t\t\t\t\t  'qty-sold': 10,\r\n          price: 800,\r\n          'min-qty': 4,\r\n        })\r\n\t\t\t  .end((err, res) => {\r\n\t\t\t\t  expect(res.body.message).to.equal('Sorry, accessible to admin only');\r\n\t\t\t\t  expect(res).to.have.status(401);\r\n\t\t\t\t  done();\r\n\t\t\t  });\r\n    });\r\n\r\n    it('Should post products if admin', (done) => {\r\n      chai.request(app)\r\n\t\t\t  .post('/api/v1/products')\r\n\t\t\t  .set('Authorization', 'Bearer admin')\r\n\t\t\t  .send({\r\n          name: 'junk',\r\n          category: 'provisions',\r\n          'qty-left': 20,\r\n\t\t\t\t\t  'qty-sold': 10,\r\n          price: 800,\r\n          'min-qty': 4,\r\n        })\r\n\t\t\t  .end((err, res) => {\r\n\t\t\t\t  expect(res.body.newProduct).to.have.property('id');\r\n\t\t\t\t  expect(res).to.have.status(201);\r\n\t\t\t\t  done();\r\n\t\t\t  });\r\n    });\r\n  });\r\n});\r\n"]}