{"version":3,"sources":["../../../server/test/controllers/saleController.spec.js"],"names":["chai","use","chaiHttp","expect","admin","userData","attendant","exampleSale","salesData","wrongSellerName","wrongProductName","wrongQuantity","wrongPrice","wrongTotal","omittedField","zeroQuantity","longSellerName","wrongToken","adminToken","attendantToken","describe","before","done","request","app","post","send","end","err","res","body","token","it","get","set","to","equal","have","status","property","that","is","a","be","an","has"],"mappings":"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","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport app from '../../app';\r\nimport userData from './mocks/userData';\r\nimport salesData from './mocks/saleData';\r\n\r\nchai.use(chaiHttp);\r\nconst { expect } = chai;\r\n\r\nconst { admin, attendant } = userData;\r\nconst {\r\n  exampleSale, wrongSellerName, wrongProductName, wrongQuantity, wrongPrice, wrongTotal,\r\n  omittedField, zeroQuantity, longSellerName,\r\n} = salesData;\r\n\r\nconst wrongToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImphYWNoaWRvIiwicGFzc3dvcmQiOiIwNjM4NDU3OWhmIiwiaWF0IjoxNTQ3MDY4NzY2LCJleHAiOjE1NDcwNzIzNjZ9._L0BF4aCsGWU9jRJF8lsuu9_WLKyvEGpMJbn1KgSmSM';\r\n\r\nlet adminToken;\r\nlet attendantToken;\r\n\r\ndescribe('Tests for sales', () => {\r\n  before((done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/login')\r\n      .send(admin)\r\n      .end((err, res) => {\r\n        adminToken = res.body.token;\r\n        done();\r\n      });\r\n  });\r\n  before((done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/login')\r\n      .send(attendant)\r\n      .end((err, res) => {\r\n        attendantToken = res.body.token;\r\n        done();\r\n      });\r\n  });\r\n\r\n  describe('get requests for sales', () => {\r\n    it('Should return error if not admin', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(403);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should return sales record if user is admin', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/sales')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res).to.be.an('object');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should return a single sale if user is admin or the seller', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/sales/1')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.be.an('object');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should return error for non-existent id', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/sales/100000')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should return error for invalid sale id', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/sales/ten')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('post requests for sales', () => {\r\n    it('should return error message if non-attendant tries to access attendant route', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', adminToken)\r\n        .send({})\r\n        .end((err, res) => {\r\n          expect(res.status).to.equal(403);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should return error message if diffent attendant tries to access seller only route', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/sales/1')\r\n        .set('Authorization', attendantToken)\r\n        .end((err, res) => {\r\n          expect(res.status).to.equal(403);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should return 401 and error message if request has bad token', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', wrongToken)\r\n        .send(exampleSale)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(401);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should return 401 and error message if user is admin', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', adminToken)\r\n        .send(exampleSale)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(403);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should return error if a required field is omitted', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(omittedField)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.be.an('object').that.has.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should respond with a 422 for invalid seller name', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(wrongSellerName)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.be.an('object').that.has.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should respond with error for seller name too long', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(longSellerName)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.be.an('object').that.has.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('respond with a 422 for invalid product name', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(wrongProductName)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.be.an('object').that.has.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('respond with a 422 for invalid quantity', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(wrongQuantity)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.be.an('object').that.has.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('respond with a 422 for zero quantity', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(zeroQuantity)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.be.an('object').that.has.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('respond with a 422 for invalid product price', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(wrongPrice)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.be.an('object').that.has.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('respond with a 422 for invalid product total', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(wrongTotal)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.be.an('object').that.has.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should create sale record for attendant if data is valid', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/sales')\r\n        .set('Authorization', attendantToken)\r\n        .send(exampleSale)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(201);\r\n          expect(res.body).to.be.an('object').that.has.property('newSale').that.is.an('object');\r\n          done();\r\n        });\r\n    });\r\n  });\r\n});\r\n"],"file":"saleController.spec.js"}