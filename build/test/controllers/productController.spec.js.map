{"version":3,"sources":["../../../server/test/controllers/productController.spec.js"],"names":["chai","use","chaiHttp","expect","admin","userData","attendant","exampleProduct","productData","invalidProductName","invalidProductCategory","invalidProductPrice","invalidProductLeft","invalidProductSold","invalidMinQuantity","invalidQuantitySold","invalidProductDetails","updateQuantitySold","updateProductDetails","adminToken","attendantToken","describe","before","done","request","app","post","send","end","err","res","body","token","it","to","equal","status","have","property","that","is","a","set","get","an","has","length","greaterThan","newProduct","put","delete"],"mappings":"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","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport app from '../../app';\r\nimport userData from './mocks/userData';\r\nimport productData from './mocks/productData';\r\n\r\nchai.use(chaiHttp);\r\nconst { expect } = chai;\r\n\r\nconst { admin, attendant } = userData;\r\nconst {\r\n  exampleProduct,\r\n  invalidProductName, invalidProductCategory, invalidProductPrice, invalidProductLeft,\r\n  invalidProductSold, invalidMinQuantity, invalidQuantitySold, invalidProductDetails,\r\n  updateQuantitySold, updateProductDetails,\r\n} = productData;\r\n\r\nlet adminToken;\r\nlet attendantToken;\r\n\r\ndescribe('products', () => {\r\n  before((done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/login')\r\n      .send(admin)\r\n      .end((err, res) => {\r\n        adminToken = res.body.token;\r\n        done();\r\n      });\r\n  });\r\n  before((done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/login')\r\n      .send(attendant)\r\n      .end((err, res) => {\r\n        attendantToken = res.body.token;\r\n        done();\r\n      });\r\n  });\r\n\r\n  describe('Tests for no token or bad token cases', () => {\r\n    it('should return error message if no token', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .send({})\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res.status).to.equal(401);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n    it('should return error message if token is blank', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', '')\r\n        .send({})\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res.status).to.equal(401);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n    it('should return error message if token is invalid', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImphYWNoaWRvIiwicGFzc3dvcmQiOiIwNjM4NDU3OWhmIiwiaWF0IjoxNTQ3MDY4NzY2LCJleHAiOjE1NDcwNzIzNjZ9._L0BF4aCsGWU9jRJF8lsuu9_WLKyvEGpMJbn1KgSmSM')\r\n        .send({})\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res.status).to.equal(401);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('get requests for products', () => {\r\n    it('Should return all products', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.have.property('allProducts').that.is.an('array').that.has.length.greaterThan(0);\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should return all available products', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/products/available')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.have.property('availableProducts').that.is.an('array').that.has.length.greaterThan(0);\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should return all finished products', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/products/finished')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.have.property('finishedProducts').that.is.an('array').that.has.length.greaterThan(0);\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should return an existing product', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/products/1')\r\n        .set('Authorization', attendantToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.have.property('product').that.is.an('object').that.has.property('id');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should not return product for invalid id', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/products/ten')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('Should return error for non-existent id', (done) => {\r\n      chai.request(app)\r\n        .get('/api/v1/products/10000')\r\n        .set('Authorization', attendantToken)\r\n        .end((err, res) => {\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('post requests for products', () => {\r\n    it('attendant should not add products to the store', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', attendantToken)\r\n        .send(exampleProduct)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(403);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('product name should follow a format', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .send(invalidProductName)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('product category should follow a format', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .send(invalidProductCategory)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('product price should follow a format', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .send(invalidProductPrice)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('product quantity left should follow a format', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .send(invalidProductLeft)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('product quantity sold should follow a format', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .send(invalidProductSold)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('product min. quantity should follow a format', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .send(invalidMinQuantity)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('admin should add products to the store', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .send(exampleProduct)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(201);\r\n          expect(res.body.newProduct).to.have.property('id');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('product name should be unique', (done) => {\r\n      chai.request(app)\r\n        .post('/api/v1/products')\r\n        .set('Authorization', adminToken)\r\n        .send(exampleProduct)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(409);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('Update products', () => {\r\n    it('product details should follow the correct format', (done) => {\r\n      chai.request(app)\r\n        .put('/api/v1/products/details/3')\r\n        .set('Authorization', adminToken)\r\n        .send(invalidProductDetails)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should return error for non-existent product id while updating details', (done) => {\r\n      chai.request(app)\r\n        .put('/api/v1/products/details/10000')\r\n        .set('Authorization', adminToken)\r\n        .send(updateProductDetails)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('attendant should not update product details', (done) => {\r\n      chai.request(app)\r\n        .put('/api/v1/products/details/3')\r\n        .set('Authorization', attendantToken)\r\n        .send(updateProductDetails)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(403);\r\n          expect(res.body).to.have.property('error').that.is.an('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('admin should update product details', (done) => {\r\n      chai.request(app)\r\n        .put('/api/v1/products/details/3')\r\n        .set('Authorization', adminToken)\r\n        .send(updateProductDetails)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.have.property('updatedProduct').that.is.an('object');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('quantity sold should follow the correct format', (done) => {\r\n      chai.request(app)\r\n        .put('/api/v1/products/quantity-sold/3')\r\n        .set('Authorization', attendantToken)\r\n        .send(invalidQuantitySold)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.an('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should return error for non-existent id while updating quantiy sold', (done) => {\r\n      chai.request(app)\r\n        .put('/api/v1/products/quantity-sold/100000')\r\n        .set('Authorization', attendantToken)\r\n        .send(updateQuantitySold)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.have.property('error').that.is.an('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('admin should not update quantity sold', (done) => {\r\n      chai.request(app)\r\n        .put('/api/v1/products/quantity-sold/3')\r\n        .set('Authorization', adminToken)\r\n        .send(updateQuantitySold)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(403);\r\n          expect(res.body).to.have.property('error').that.is.an('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('attendant should update quantity sold', (done) => {\r\n      chai.request(app)\r\n        .put('/api/v1/products/quantity-sold/3')\r\n        .set('Authorization', attendantToken)\r\n        .send(updateQuantitySold)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.have.property('updatedProduct').that.is.an('object');\r\n          done();\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('delete product route', () => {\r\n    it('should return error for invalid id', (done) => {\r\n      chai.request(app)\r\n        .delete('/api/v1/products/two')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(422);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should return error for non-existent id', (done) => {\r\n      chai.request(app)\r\n        .delete('/api/v1/products/10000')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('attendant should not delete products', (done) => {\r\n      chai.request(app)\r\n        .delete('/api/v1/products/4')\r\n        .set('Authorization', attendantToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(403);\r\n          expect(res.body).to.have.property('error').that.is.a('string');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('admin should be able to delete a product', (done) => {\r\n      chai.request(app)\r\n        .delete('/api/v1/products/4')\r\n        .set('Authorization', adminToken)\r\n        .end((err, res) => {\r\n          expect(err).to.equal(null);\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.have.property('deletedProduct').that.is.an('object');\r\n          done();\r\n        });\r\n    });\r\n  });\r\n});\r\n"],"file":"productController.spec.js"}