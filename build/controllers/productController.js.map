{"version":3,"sources":["../../server/controllers/productController.js"],"names":["require","body","validationResult","exports","getAll","req","res","status","json","products","getProduct","productId","params","requiredProduct","forEach","product","id","addProduct","isLength","min","trim","isNumeric","errors","isEmpty","send","name","category","qty_left","qty_sold","price","min_qty","length","newProduct","push","created","success"],"mappings":";;AAAA;;;;;;eAEmCA,QAAQ,yBAAR,C;IAA3BC,I,YAAAA,I;IAAMC,gB,YAAAA,gB;;AAEdC,QAAQC,MAAR,GAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACnC,SAAOA,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,kBAArB,CAAP;AACD,CAFD;;AAIAN,QAAQO,UAAR,GAAqB,UAAUL,GAAV,EAAeC,GAAf,EAAoB;AACvC,MAAMK,YAAYN,IAAIO,MAAJ,CAAWD,SAA7B;AACA,MAAIE,kBAAkB,IAAtB;;AAEAJ,qBAASK,OAAT,CAAiB,UAACC,OAAD,EAAa;AAC5B,QAAIA,QAAQC,EAAR,IAAcL,SAAlB,EAA6B;AAC3BE,wBAAkBE,OAAlB;AACD;AACF,GAJD;;AAMA,SAAOT,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBK,eAArB,CAAP;AACD,CAXD;;AAaAV,QAAQc,UAAR,GAAqB,CAEnBhB,KAAK,MAAL,EAAa,0BAAb,EAAyCiB,QAAzC,CAAkD,EAAEC,KAAK,CAAP,EAAlD,EAA8DC,IAA9D,EAFmB,EAGnBnB,KAAK,UAAL,EAAiB,8BAAjB,EAAiDiB,QAAjD,CAA0D,EAAEC,KAAK,CAAP,EAA1D,CAHmB,EAInBlB,KAAK,UAAL,EAAiB,6BAAjB,EAAgDoB,SAAhD,EAJmB,EAKnBpB,KAAK,UAAL,EAAiB,6BAAjB,EAAgDoB,SAAhD,EALmB,EAMnBpB,KAAK,OAAL,EAAc,0BAAd,EAA0CoB,SAA1C,EANmB,EAOnBpB,KAAK,SAAL,EAAgB,4BAAhB,EAA8CoB,SAA9C,EAPmB,EASnB,UAAUhB,GAAV,EAAeC,GAAf,EAAoB;AAClB,MAAMgB,SAASpB,iBAAiBG,GAAjB,CAAf;;AAEA,MAAI,CAACiB,OAAOC,OAAZ,EAAqB;AACnBjB,QAAIC,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB,4BAArB;AACD;;AALiB,kBASdnB,IAAIJ,IATU;AAAA,MAQhBwB,IARgB,aAQhBA,IARgB;AAAA,MAQVC,QARU,aAQVA,QARU;AAAA,MAQAC,QARA,aAQAA,QARA;AAAA,MAQUC,QARV,aAQUA,QARV;AAAA,MAQoBC,KARpB,aAQoBA,KARpB;AAAA,MAQ2BC,OAR3B,aAQ2BA,OAR3B;;AAUlB,MAAMd,KAAKP,mBAASsB,MAAT,GAAkB,CAA7B;;AAEA,MAAMC,aAAa;AACjBhB,UADiB,EACbS,UADa,EACPC,kBADO,EACGC,kBADH,EACaC,kBADb,EACuBC,YADvB,EAC8BC;AAD9B,GAAnB;;AAIArB,qBAASwB,IAAT,CAAcD,UAAd;AACA,SAAO1B,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAE0B,SAASF,UAAX,EAAuBG,SAAS,IAAhC,EAArB,CAAP;AACD,CA3BkB,CAArB","file":"productController.js","sourcesContent":["import products from '../models/products';\n\nconst { body, validationResult } = require('express-validator/check');\n\nexports.getAll = function (req, res) {\n  return res.status(200).json(products);\n};\n\nexports.getProduct = function (req, res) {\n  const productId = req.params.productId;\n  let requiredProduct = null;\n\n  products.forEach((product) => {\n    if (product.id == productId) {\n      requiredProduct = product;\n    }\n  });\n\n  return res.status(200).json(requiredProduct);\n};\n\nexports.addProduct = [\n\n  body('name', 'product name is required').isLength({ min: 1 }).trim(),\n  body('category', 'product category is required').isLength({ min: 1 }),\n  body('qty_left', 'qty_left should be a number').isNumeric(),\n  body('qty_sold', 'qty_sold should be a number').isNumeric(),\n  body('price', 'price should be a number').isNumeric(),\n  body('min_qty', 'min_qty should be a number').isNumeric(),\n\n  function (req, res) {\n    const errors = validationResult(req);\n\n    if (!errors.isEmpty) {\n      res.status(422).send('problem with data supplied');\n    }\n\n    const {\n      name, category, qty_left, qty_sold, price, min_qty,\n    } = req.body;\n    const id = products.length + 1;\n\n    const newProduct = {\n      id, name, category, qty_left, qty_sold, price, min_qty,\n    };\n\n    products.push(newProduct);\n    return res.status(201).json({ created: newProduct, success: true });\n  },\n\n];\n"]}