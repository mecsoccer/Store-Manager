{"version":3,"sources":["../server/app.js"],"names":["dotenv","config","app","set","path","join","__dirname","engine","ejs","renderFile","use","express","json","urlencoded","extended","static","req","res","next","header","frontendRouter","apiRouter","err","locals","message","error","get","status","render","port","process","env","PORT","server","http","createServer","listen","module","exports"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAEAA,gBAAOC,MAAP;;AAEA,IAAMC,GAAG,GAAG,uBAAZ,C,CAEA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,IAArB,CAAjB;AACAJ,GAAG,CAACK,MAAJ,CAAW,MAAX,EAAmBC,aAAIC,UAAvB;AACAP,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AAEAD,GAAG,CAACQ,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAR,GAAG,CAACQ,GAAJ,CAAQC,iBAAQC,IAAR,EAAR;AACAV,GAAG,CAACQ,GAAJ,CAAQC,iBAAQE,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAZ,GAAG,CAACQ,GAAJ,CAAQ,4BAAR;AACAR,GAAG,CAACQ,GAAJ,CAAQC,iBAAQI,MAAR,CAAeX,cAAKC,IAAL,CAAUC,SAAV,EAAqB,IAArB,CAAf,CAAR;AACAJ,GAAG,CAACQ,GAAJ,CAAQ,UAACM,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BD,EAAAA,GAAG,CAACE,MAAJ,CAAW,6BAAX,EAA0C,2CAA1C;AACAF,EAAAA,GAAG,CAACE,MAAJ,CAAW,kCAAX,EAA+C,MAA/C;AACAF,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,+DAA3C;AACAF,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,iCAA3C;AACAD,EAAAA,IAAI;AACL,CAND;AAQAhB,GAAG,CAACQ,GAAJ,CAAQ,GAAR,EAAaU,aAAb;AACAlB,GAAG,CAACQ,GAAJ,CAAQ,SAAR,EAAmBW,cAAnB,E,CAEA;;AACAnB,GAAG,CAACQ,GAAJ,CAAQ,UAACM,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BA,EAAAA,IAAI,CAAC,yBAAY,GAAZ,CAAD,CAAJ;AACD,CAFD,E,CAIA;;AACAhB,GAAG,CAACQ,GAAJ,CAAQ,UAACY,GAAD,EAAMN,GAAN,EAAWC,GAAX,EAAmB;AACzB;AACAA,EAAAA,GAAG,CAACM,MAAJ,CAAWC,OAAX,GAAqBF,GAAG,CAACE,OAAzB;AACAP,EAAAA,GAAG,CAACM,MAAJ,CAAWE,KAAX,GAAmBT,GAAG,CAACd,GAAJ,CAAQwB,GAAR,CAAY,KAAZ,MAAuB,aAAvB,GAAuCJ,GAAvC,GAA6C,EAAhE,CAHyB,CAKzB;;AACAL,EAAAA,GAAG,CAACU,MAAJ,CAAWL,GAAG,CAACK,MAAJ,IAAc,GAAzB;AACAV,EAAAA,GAAG,CAACW,MAAJ,CAAW,OAAX;AACD,CARD;AAUA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,MAAjC;AACA9B,GAAG,CAACC,GAAJ,CAAQ,MAAR,EAAgB0B,IAAhB;;AAEA,IAAMI,MAAM,GAAGC,cAAKC,YAAL,CAAkBjC,GAAlB,CAAf;;AACA+B,MAAM,CAACG,MAAP,CAAcP,IAAd;AAEAQ,MAAM,CAACC,OAAP,GAAiBpC,GAAjB","sourcesContent":["import http from 'http';\r\nimport createError from 'http-errors';\r\nimport express from 'express';\r\nimport path from 'path';\r\nimport cookieParser from 'cookie-parser';\r\nimport logger from 'morgan';\r\nimport ejs from 'ejs';\r\nimport dotenv from 'dotenv';\r\n\r\nimport frontendRouter from './routes/home';\r\nimport apiRouter from './routes/index';\r\n\r\ndotenv.config();\r\n\r\nconst app = express();\r\n\r\n// view engine setup\r\napp.set('views', path.join(__dirname, 'UI'));\r\napp.engine('html', ejs.renderFile);\r\napp.set('view engine', 'html');\r\n\r\napp.use(logger('dev'));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'UI')));\r\napp.use((req, res, next) => {\r\n  res.header('Access-Control-Allow-Origin', 'https://mecsoccer.github.io/Store-Manager');\r\n  res.header('Access-Control-Allow-Credentials', 'true');\r\n  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-type, Authorization, Accept');\r\n  res.header('Access-Control-Allow-Methods', 'POST, OPTIONS, GET, PUT, DELETE');\r\n  next();\r\n});\r\n\r\napp.use('/', frontendRouter);\r\napp.use('/api/v1', apiRouter);\r\n\r\n// catch 404 and forward to error handler\r\napp.use((req, res, next) => {\r\n  next(createError(404));\r\n});\r\n\r\n// error handler\r\napp.use((err, req, res) => {\r\n  // set locals, only providing error in development\r\n  res.locals.message = err.message;\r\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\r\n\r\n  // render the error page\r\n  res.status(err.status || 500);\r\n  res.render('error');\r\n});\r\n\r\nconst port = process.env.PORT || '3000';\r\napp.set('port', port);\r\n\r\nconst server = http.createServer(app);\r\nserver.listen(port);\r\n\r\nmodule.exports = app;\r\n"],"file":"app.js"}